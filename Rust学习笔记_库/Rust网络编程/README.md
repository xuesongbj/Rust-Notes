# Rust网络编程

在主流操作系统中，网络堆栈的传输层为开发者提供了一系列API，其名为套接字(socket)。它包括一组接口，用于在两个进程之间建立通信连接。套接字允许你在本地或远程两个进程之间传递数据，而无须开发者了解底层的网络协议。

Socket API主要用于 TCP/IP 层。在这一层，我们创建的套接字按不同级别进行分类:

* 协议：根据协议，我们可以有TCP套接字或UDP套接字。TCP是一种包含状态的流协议，提供能够以可靠的方式传递消息的能力，而UDP是一种无状态且不可靠的协议。

* 通信类型：根据我们是与本地计算机还是远程计算机上的进程通信，可以使用互联网套接字或者UNIX域套接字。互联网套接字用于在远程计算机上的进程之间交换信息。它由IP地址和端口构成的元组表示。远程通信使用IP套接字；UNIX域套接字用于本地计算机上运行的进程之间的通信。

* I/O模型：根据如何读取和写入套接字数据，我们可以创建两种套接字： 阻塞套接字和非阻塞套接字。

&nbsp;

## Rust 网络编程

Rust在标准库中为我们提供了 `net` 模块。 包含传输层的网络单元(TCP/UDP)。对于TCP通信，我们有 `TcpStream` 和 `TcpListener` 类型。对于UDP通信，我们有 `UdpSocket` 类型。`net` 模块还提供了用于正确表示 `v4` 和 `v6` 版本IP地址的数据类型。

应用程序为客户提供了服务的质量和效率。从技术角度来看，会涉及到套接字I/O模型的选择问题。

在阻塞和非阻塞套接字之间进行选择会改变其体系结构、编写代码的方式，以及如何扩展到客户端。阻塞套接字为用户提供了是同步I/O模型，而非阻塞套接字为用户提供的是异步是异步I/O模型。在实现Socket API的平台上，例如UNIX，默认情况下会在阻塞模式下创建套接字。这要求主流的网络堆栈上默认的I/O模型是同步模型。

