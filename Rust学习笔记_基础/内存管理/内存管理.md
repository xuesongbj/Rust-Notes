# 内存管理

可以按照内存管理需求将编程语言大致分为两类：**手动内存管理类和自动内存管理类。**

**手动内存管理**需要程序员使用 `malloc` 和 `free` 等函数显式管理内存，像C语言。

**自动内存管理**需要使用`GC(Garbage Collection，垃圾回收)`来对内存进行自动化管理，而无须开发者手动开辟和释放内存，比如 `Java`、`C#`、`Ruby`、`Python` 等语言都是靠 `GC` 自动化管理内存的。

通过对手动内存管理和自动内存管理比较，编程语言选择就是，对性能要求高并且需要对内存进行精确操控的系统级开发，一般会选择 `C`和`C++`之类的语言，但存在的问题就是，稍微不注意可能导致内存不安全的问题；其它类型的开发就选择 `Java`、`Python`、`Go` 之类的高级语言，一般不会出现内存不安全的问题，但是它们的性能却降低不少。

针对以上两种方式存在的问题Rust取了一个中间点，既不需要程序员手工进行申请/释放内存，也不会有自动内存管理GC导致的`Stop The World`。

&nbsp;

## 手动内存管理

手动内存管理的优势在于性能，因为可以直接操控内存，但同时也带来了不少问题。

&nbsp;

### 内存泄漏

忘记内存释放，就会带来内存泄漏的问题。

&nbsp;

### 悬垂指针(Dangling Pointer)

如果某个指针引用的内存被非法释放掉了，而该指针依旧指向被释放的内存，这种情况下的指针就叫悬垂指针。如果将悬垂指针分配给某个其他的对象，将会产生无法预料的后果。

&nbsp;

## 自动内存管理

GC自动内存管理接管了程序员分配和回收内存的任务，帮助提升了代码的抽象度和可靠性。GC使用了各种精确的算法来解决内存分配和回收的问题，但并不代表能解决所有问题。GC最大的问题是会引起`Stop The World`，GC在工作的时候必须保证程序不会引入新的「垃圾」，所以要使运行中的程序暂停，会造成性能问题。

