# Rust中的资源管理

Rust不需要开发者显示地通过`malloc/new`或`free/delete`之类的函数去分配和回收堆内存。**Rust可以静态地在编译时确定何时需要释放内存，而不需要在运行时确定**。Rust有一套完整的内存管理机制来保证资源的合理利用和良好的性能。

&nbsp;

## 变量和函数

变量有两种：全局变量和局部变量。

全局变量分为常量变量和静态变量。局部变量是指在函数中定义的变量。

&nbsp;

### 常量

常量使用`const`关键字定义，并且需要显示指明类型，只能进行简单赋值，只能使用支持`CTFE`的表达式。**常量没有固定的内存地址，因为其生命周期是全局的，随着程序消亡而消亡，并且会被编译器有效地内联到每个使用到它的地方**。

&nbsp;

### 静态变量

静态变量使用`static`关键字定义，**静态变量的生命周期是全局的，它不会被内联，每个静态变量都有一个固定的内存地址**。

**静态变量资源分配并不是在栈上和堆上，而是和程序代码一起被存储在静态存储区中**。静态存储区是伴随着程序的二进制文件的生成(编译时)被分配的，并且在程序的整个运行期都存在。**Rust中的字符串字面量同样是存储于静态存储区中**。

### 检查声明未初始化的变量

函数中定义的局部变量都会被默认存储在栈中。Rust编译器可以检查未初始化的变量，以保证内存安全。

```rust
fn main() {
    let x: i32;
            // ^ use of possibly-uninitialized `x` 
    println!("{}", x);
}
```
